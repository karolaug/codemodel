#!/usr/bin/make -f

include /usr/share/cdbs/1/class/ant.mk
include /usr/share/cdbs/1/rules/debhelper.mk

JAVA_HOME 		:= /usr/lib/jvm/java-1.5.0-sun
DEB_ANT_BUILD_TARGET	:= jar
DEB_ANT_BUILDFILE	:= debian/build.xml

ALL_JARS = $(wildcard *.jar)
DEST_DIR = $(DEB_DESTDIR)/usr/share/java

common-install-prehook-indep::
	for jar in $(ALL_JARS); do                         \
	  BASENAME=`basename $$jar .jar`;        	   \
	  FULLNAME=$$BASENAME-$(DEB_UPSTREAM_VERSION).jar; \
	  install -m 644 -D $$jar $(DEST_DIR)/$$FULLNAME;  \
	  ln -s $$FULLNAME $(DEST_DIR)/$$BASENAME.jar;     \
	done

get-orig-source:
	sh debian/orig-tar.sh $(DEB_UPSTREAM_VERSION)
