<?xml version="1.0" encoding="UTF-8"?>

<project default="jar" name="${project.name}" basedir="..">

  <target name="clean">
    <delete dir="${codemodel.dir}/${class.dir}" quiet="true"/>
    <delete dir="${codemodel-annotation.dir}/${class.dir}" quiet="true"/>
    <delete file="${codemodel.jar}" quiet="true"/>
    <delete file="${codemodel-annotation.jar}" quiet="true"/>
  </target>

  <target name="jar">
    <mkdir dir="${codemodel.dir}/${class.dir}"/>
    <javac srcdir="${codemodel.dir}/${source.dir}" destdir="${codemodel.dir}/${class.dir}"
      debug="true" source="1.5"/>

    <jar jarfile="${codemodel.jar}">
      <fileset dir="${codemodel.dir}/${class.dir}">
          <include name="**"/>
      </fileset>
    </jar>

    <mkdir dir="${codemodel-annotation.dir}/${class.dir}"/>
    <javac srcdir="${codemodel-annotation.dir}/${source.dir}" destdir="${codemodel-annotation.dir}/${class.dir}"
      debug="true" source="1.5" classpath="${codemodel.jar}"/>

    <jar jarfile="${codemodel-annotation.jar}">
      <fileset dir="${codemodel-annotation.dir}/${class.dir}">
          <include name="**"/>
      </fileset>
    </jar>
  </target>

</project>
